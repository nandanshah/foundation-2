create keyspace useritemrecotest WITH REPLICATION = { 'class' : 'SimpleStrategy', 'replication_factor' : 1 };
use useritemrecotest;
create table item (id uuid,tenantid uuid,regionid uuid,credits_id uuid,datecreated text,duration int,episodecount int,fidelities list<text>,fullimg text,genres_id list<uuid>,largethumbnail text,licensing_id uuid,likecnt int,likedpct double,longdesc text,moods_id list<uuid>,permissions text,progress int,recommendationreason text,reviews_id list<uuid>,seasons_id list<uuid>,shortdesc text,thumbnail text,title text,trailerurl text,type_id uuid,userrating text,viewcnt int,year int,PRIMARY KEY (id,tenantid,regionid));
create table account (id uuid,tenantid uuid,type text,PRIMARY KEY (id));
create table profile (accountid uuid,id uuid,preferredregion uuid,avatarimageurl text,birthdate timestamp,defaultcolor text,emailaddress text,emailaddress_lower text,firstname text,gender text,isadmin boolean,isrootprofile boolean,lastname text,notfiyfriendregistration boolean,notifyfriendlike boolean,notifynewrelease boolean,notifypromotional boolean,notifywatchlistexpiration boolean,passwordhash text,passwordsalt text,pinhash text,pinsalt text,profiletype text,socialauthtoken text,watchlist_id uuid,PRIMARY KEY (accountid, id));
create table trend(id timeuuid,tenantid uuid,regionid uuid,itemid uuid,trendscore double,normalizedtrendscore double,trendscorereason text,flag int,date timestamp, primary key (id,tenantid,regionid,itemid));
create table popularity(id timeuuid,tenantid uuid,regionid uuid,itemid uuid,totalwatch double,aggratings  double,popularityscore double,normalizedpopularityscore double,popularityscorereason text,flag int,date timestamp,primary key (id,tenantid,regionid,itemid));
create table scoresummary (id timeuuid,tenantid uuid,regionid uuid,itemid uuid,trendscore double,trendscorereason text,popularityscore double,popularityscorereason text,flag int,date timestamp,primary key (id,tenantid, regionid,itemid));
create table useritemrecommendation(id timeuuid,tenantid uuid,regionid uuid,userid uuid,itemid uuid,trendscore double,trendscorereason text,popularityscore double,popularityscorereason text,flag int,date timestamp,primary key (id,tenantid, regionid,userid,itemid));
create index useritemrecotrendflag ON trend (flag);
create index useritemrecotrenddate ON trend (date);
create index useritemrecopopularityflag ON popularity (flag);
create index useritemrecopopularitydate ON popularity (date);
create index useritemrecoscoresummaryflag ON scoresummary (flag);
create index useritemrecoscoresummarydate ON scoresummary (date);
insert into profile(id,accountid,preferredregion) values(C979CA35-B58D-434B-B2D6-EA0316BCC9A1,C979CA35-B58D-434B-B2D6-EA0316BCC9A1,C979CA35-B58D-434B-B2D6-EA0316BCC9A1);
insert into account(id,tenantid) values(C979CA35-B58D-434B-B2D6-EA0316BCC9A1,C979CA35-B58D-434B-B2D6-EA0316BCC9A1);
insert into account(id,tenantid) values(C979CA35-B58D-434B-B2D6-EA0316BCC9A2,C979CA35-B58D-434B-B2D6-EA0316BCC9A2);
insert into item(id,tenantid,regionid) values(C979CA35-B58D-434B-B2D6-EA0316BCC9A1,C979CA35-B58D-434B-B2D6-EA0316BCC9A1,C979CA35-B58D-434B-B2D6-EA0316BCC9A1);
insert into item(id,tenantid,regionid) values(C979CA35-B58D-434B-B2D6-EA0316BCC9A5,C979CA35-B58D-434B-B2D6-EA0316BCC9A5,C979CA35-B58D-434B-B2D6-EA0316BCC9A5);
insert into trend(id,tenantid,regionid,itemid,trendscore,normalizedtrendscore,trendscorereason,flag,date) values(0a7f4400-02e0-11e4-8080-808080808080,C979CA35-B58D-434B-B2D6-EA0316BCC9A1,C979CA35-B58D-434B-B2D6-EA0316BCC9A1,C979CA35-B58D-434B-B2D6-EA0316BCC9A1,4,0.6,'trending',1,'2014-06-30');
insert into trend(id,tenantid,regionid,itemid,trendscore,normalizedtrendscore,trendscorereason,flag,date) values(0a7f4400-02e0-11e4-8080-808080808080,C979CA35-B58D-434B-B2D6-EA0316BCC9A5,C979CA35-B58D-434B-B2D6-EA0316BCC9A5,C979CA35-B58D-434B-B2D6-EA0316BCC9A5,4,0.1,'trending',1,'2014-07-30');
insert into popularity(id,tenantid,regionid,itemid,popularityscore,normalizedpopularityscore,popularityscorereason,flag,date) values(0a7f4400-02e0-11e4-8080-808080808080,C979CA35-B58D-434B-B2D6-EA0316BCC9A1,C979CA35-B58D-434B-B2D6-EA0316BCC9A1,C979CA35-B58D-434B-B2D6-EA0316BCC9A1,4,0.6,'Popularity',1,'2014-06-30');
insert into popularity(id,tenantid,regionid,itemid,popularityscore,normalizedpopularityscore,popularityscorereason,flag,date) values(0a7f4400-02e0-11e4-8080-808080808080,C979CA35-B58D-434B-B2D6-EA0316BCC9A5,C979CA35-B58D-434B-B2D6-EA0316BCC9A5,C979CA35-B58D-434B-B2D6-EA0316BCC9A5,4,0.1,'Popularity',1,'2014-06-30');
