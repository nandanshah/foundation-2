drop keyspace IF EXISTS n2test;
CREATE KEYSPACE IF NOT EXISTS n2test WITH replication = {'class':'SimpleStrategy', 'replication_factor':1};
use n2test;
create table if not exists profile (accountid uuid,id uuid,homeregionid uuid,preferredlocaleid uuid,avatarimageurl text,birthdate timestamp,defaultcolor text,emailaddress text,emailaddress_lower text,firstname text,gender text,isadmin boolean,isrootprofile boolean,lastname text,notfiyfriendregistration boolean,notifyfriendlike boolean,notifynewrelease boolean,notifypromotional boolean,notifywatchlistexpiration boolean,passwordhash text,passwordsalt text,pinhash text,pinsalt text,profiletype text,socialauthtoken text,watchlist_id uuid,PRIMARY KEY (accountid, id));
insert into profile(id,accountid,homeregionid) values(C979CA35-B58D-434B-B2D6-EA0316BCC9A1,C979CA35-B58D-434B-B2D6-EA0316BCC9A1,C979CA35-B58D-434B-B2D6-EA0316BCC9C1);
insert into profile(id,accountid,homeregionid) values(C979CA35-B58D-434B-B2D6-EA0316BCC9A2,C979CA35-B58D-434B-B2D6-EA0316BCC9A1,C979CA35-B58D-434B-B2D6-EA0316BCC9C2);
insert into profile(id,accountid,homeregionid) values(C979CA35-B58D-434B-B2D6-EA0316BCC9A3,C979CA35-B58D-434B-B2D6-EA0316BCC9A1,C979CA35-B58D-434B-B2D6-EA0316BCC9C1);
insert into profile(id,accountid,homeregionid) values(C979CA35-B58D-434B-B2D6-EA0316BCC9A4,C979CA35-B58D-434B-B2D6-EA0316BCC9A1,C979CA35-B58D-434B-B2D6-EA0316BCC9C1);
insert into profile(id,accountid,homeregionid) values(C979CA35-B58D-434B-B2D6-EA0316BCC9A5,C979CA35-B58D-434B-B2D6-EA0316BCC9A1,C979CA35-B58D-434B-B2D6-EA0316BCC9C1);
insert into profile(id,accountid,homeregionid) values(C979CA35-B58D-434B-B2D6-EA0316BCC9A6,C979CA35-B58D-434B-B2D6-EA0316BCC9A3,C979CA35-B58D-434B-B2D6-EA0316BCC9C3);
drop keyspace IF EXISTS fistest;
CREATE KEYSPACE IF NOT EXISTS fistest WITH replication = {'class':'SimpleStrategy', 'replication_factor':1};
use fistest;
create table if not exists common_daily_eventsummary_per_useritem(periodid timeuuid ,tenantid uuid,regionid uuid,itemid uuid,profileid uuid,eventtypeaggregate  map<text,double>,dayscore double,date timestamp,eventrequired int,primary key (periodid,tenantid,regionid,itemid,profileid));
create index if not exists index_common_daily_eventsummary_per_useritem_event_required on common_daily_eventsummary_per_useritem (eventrequired);
create index if not exists index_common_daily_eventsummary_per_useritem_date on common_daily_eventsummary_per_useritem (date);
insert into common_daily_eventsummary_per_useritem(periodid,tenantid,regionid,itemid,profileid,eventtypeaggregate,dayscore,date,eventrequired) values (366e8400-fef2-11e3-8080-808080808080,C979CA35-B58D-434B-B2D6-EA0316BCC9B1,C979CA35-B58D-434B-B2D6-EA0316BCC9C1,C979CA35-B58D-434B-B2D6-EA0316BCC120,C979CA35-B58D-434B-B2D6-EA0316BCC9A1,{'Watch':1},0.6,'2014-08-25',1); 
insert into common_daily_eventsummary_per_useritem(periodid,tenantid,regionid,itemid,profileid,eventtypeaggregate,dayscore,date,eventrequired) values (366e8400-fef2-11e3-8080-808080808081,C979CA35-B58D-434B-B2D6-EA0316BCC9B1,C979CA35-B58D-434B-B2D6-EA0316BCC9C1,C979CA35-B58D-434B-B2D6-EA0316BCC120,C979CA35-B58D-434B-B2D6-EA0316BCC9A1,{'Like':1},0.4,'2014-08-22',1); 
insert into common_daily_eventsummary_per_useritem(periodid,tenantid,regionid,itemid,profileid,eventtypeaggregate,dayscore,date,eventrequired) values (366e8400-fef2-11e3-8080-808080808082,C979CA35-B58D-434B-B2D6-EA0316BCC9B1,C979CA35-B58D-434B-B2D6-EA0316BCC9C1,C979CA35-B58D-434B-B2D6-EA0316BCC120,C979CA35-B58D-434B-B2D6-EA0316BCC9A1,{'Share':1,'Like':1},0.6,'2014-08-15',1); 
insert into common_daily_eventsummary_per_useritem(periodid,tenantid,regionid,itemid,profileid,eventtypeaggregate,dayscore,date,eventrequired) values (366e8400-fef2-11e3-8080-808080808083,C979CA35-B58D-434B-B2D6-EA0316BCC9B1,C979CA35-B58D-434B-B2D6-EA0316BCC9C1,C979CA35-B58D-434B-B2D6-EA0316BCC120,C979CA35-B58D-434B-B2D6-EA0316BCC9A1,{'Watch':1},0.6,'2014-06-25',1); 
insert into common_daily_eventsummary_per_useritem(periodid,tenantid,regionid,itemid,profileid,eventtypeaggregate,dayscore,date,eventrequired) values (366e8400-fef2-11e3-8080-808080808081,C979CA35-B58D-434B-B2D6-EA0316BCC9B1,C979CA35-B58D-434B-B2D6-EA0316BCC9C2,C979CA35-B58D-434B-B2D6-EA0316BCC121,C979CA35-B58D-434B-B2D6-EA0316BCC9A1,{'Like':1},0.4,'2014-08-22',1); 
insert into common_daily_eventsummary_per_useritem(periodid,tenantid,regionid,itemid,profileid,eventtypeaggregate,dayscore,date,eventrequired) values (366e8400-fef2-11e3-8080-808080808080,C979CA35-B58D-434B-B2D6-EA0316BCC9B1,C979CA35-B58D-434B-B2D6-EA0316BCC9C1,C979CA35-B58D-434B-B2D6-EA0316BCC121,C979CA35-B58D-434B-B2D6-EA0316BCC9A1,{'Watch':1},0.6,'2014-08-25',1); 
insert into common_daily_eventsummary_per_useritem(periodid,tenantid,regionid,itemid,profileid,eventtypeaggregate,dayscore,date,eventrequired) values (366e8400-fef2-11e3-8080-808080808081,C979CA35-B58D-434B-B2D6-EA0316BCC9B1,C979CA35-B58D-434B-B2D6-EA0316BCC9C1,C979CA35-B58D-434B-B2D6-EA0316BCC122,C979CA35-B58D-434B-B2D6-EA0316BCC9A1,{'Like':1},0.4,'2014-08-22',1); 
insert into common_daily_eventsummary_per_useritem(periodid,tenantid,regionid,itemid,profileid,eventtypeaggregate,dayscore,date,eventrequired) values (366e8400-fef2-11e3-8080-808080808082,C979CA35-B58D-434B-B2D6-EA0316BCC9B1,C979CA35-B58D-434B-B2D6-EA0316BCC9C1,C979CA35-B58D-434B-B2D6-EA0316BCC123,C979CA35-B58D-434B-B2D6-EA0316BCC9A1,{'Share':1,'Like':1},0.6,'2014-08-15',1); 
insert into common_daily_eventsummary_per_useritem(periodid,tenantid,regionid,itemid,profileid,eventtypeaggregate,dayscore,date,eventrequired) values (366e8400-fef2-11e3-8080-808080808083,C979CA35-B58D-434B-B2D6-EA0316BCC9B1,C979CA35-B58D-434B-B2D6-EA0316BCC9C1,C979CA35-B58D-434B-B2D6-EA0316BCC122,C979CA35-B58D-434B-B2D6-EA0316BCC9A1,{'Watch':1},0.6,'2014-06-25',1); 
insert into common_daily_eventsummary_per_useritem(periodid,tenantid,regionid,itemid,profileid,eventtypeaggregate,dayscore,date,eventrequired) values (366e8400-fef2-11e3-8080-808080808080,C979CA35-B58D-434B-B2D6-EA0316BCC9B1,C979CA35-B58D-434B-B2D6-EA0316BCC9C1,C979CA35-B58D-434B-B2D6-EA0316BCC120,C979CA35-B58D-434B-B2D6-EA0316BCC9A2,{'Watch':1},0.6,'2014-08-25',1); 
insert into common_daily_eventsummary_per_useritem(periodid,tenantid,regionid,itemid,profileid,eventtypeaggregate,dayscore,date,eventrequired) values (366e8400-fef2-11e3-8080-808080808081,C979CA35-B58D-434B-B2D6-EA0316BCC9B1,C979CA35-B58D-434B-B2D6-EA0316BCC9C1,C979CA35-B58D-434B-B2D6-EA0316BCC120,C979CA35-B58D-434B-B2D6-EA0316BCC9A2,{'Like':1},0.4,'2014-08-22',1); 
insert into common_daily_eventsummary_per_useritem(periodid,tenantid,regionid,itemid,profileid,eventtypeaggregate,dayscore,date,eventrequired) values (366e8400-fef2-11e3-8080-808080808082,C979CA35-B58D-434B-B2D6-EA0316BCC9B1,C979CA35-B58D-434B-B2D6-EA0316BCC9C1,C979CA35-B58D-434B-B2D6-EA0316BCC120,C979CA35-B58D-434B-B2D6-EA0316BCC9A2,{'Share':1,'Like':1},0.6,'2014-08-15',1); 
insert into common_daily_eventsummary_per_useritem(periodid,tenantid,regionid,itemid,profileid,eventtypeaggregate,dayscore,date,eventrequired) values (366e8400-fef2-11e3-8080-808080808083,C979CA35-B58D-434B-B2D6-EA0316BCC9B1,C979CA35-B58D-434B-B2D6-EA0316BCC9C1,C979CA35-B58D-434B-B2D6-EA0316BCC120,C979CA35-B58D-434B-B2D6-EA0316BCC9A2,{'Watch':1},0.6,'2014-06-25',1); 
insert into common_daily_eventsummary_per_useritem(periodid,tenantid,regionid,itemid,profileid,eventtypeaggregate,dayscore,date,eventrequired) values (366e8400-fef2-11e3-8080-808080808081,C979CA35-B58D-434B-B2D6-EA0316BCC9B1,C979CA35-B58D-434B-B2D6-EA0316BCC9C2,C979CA35-B58D-434B-B2D6-EA0316BCC121,C979CA35-B58D-434B-B2D6-EA0316BCC9A2,{'Like':1},0.4,'2014-08-22',1); 
insert into common_daily_eventsummary_per_useritem(periodid,tenantid,regionid,itemid,profileid,eventtypeaggregate,dayscore,date,eventrequired) values (366e8400-fef2-11e3-8080-808080808081,C979CA35-B58D-434B-B2D6-EA0316BCC9B1,C979CA35-B58D-434B-B2D6-EA0316BCC9C2,C979CA35-B58D-434B-B2D6-EA0316BCC120,C979CA35-B58D-434B-B2D6-EA0316BCC9A2,{'Like':1},0.4,'2014-08-22',1);
insert into common_daily_eventsummary_per_useritem(periodid,tenantid,regionid,itemid,profileid,eventtypeaggregate,dayscore,date,eventrequired) values (366e8400-fef2-11e3-8080-808080808080,C979CA35-B58D-434B-B2D6-EA0316BCC9B1,C979CA35-B58D-434B-B2D6-EA0316BCC9C1,C979CA35-B58D-434B-B2D6-EA0316BCC121,C979CA35-B58D-434B-B2D6-EA0316BCC9A2,{'Watch':1},0.6,'2014-08-25',1); 
insert into common_daily_eventsummary_per_useritem(periodid,tenantid,regionid,itemid,profileid,eventtypeaggregate,dayscore,date,eventrequired) values (366e8400-fef2-11e3-8080-808080808081,C979CA35-B58D-434B-B2D6-EA0316BCC9B1,C979CA35-B58D-434B-B2D6-EA0316BCC9C1,C979CA35-B58D-434B-B2D6-EA0316BCC122,C979CA35-B58D-434B-B2D6-EA0316BCC9A2,{'Like':1},0.4,'2014-08-22',1); 
insert into common_daily_eventsummary_per_useritem(periodid,tenantid,regionid,itemid,profileid,eventtypeaggregate,dayscore,date,eventrequired) values (366e8400-fef2-11e3-8080-808080808082,C979CA35-B58D-434B-B2D6-EA0316BCC9B1,C979CA35-B58D-434B-B2D6-EA0316BCC9C1,C979CA35-B58D-434B-B2D6-EA0316BCC122,C979CA35-B58D-434B-B2D6-EA0316BCC9A2,{'Share':1,'Like':1},0.6,'2014-08-15',1); 
insert into common_daily_eventsummary_per_useritem(periodid,tenantid,regionid,itemid,profileid,eventtypeaggregate,dayscore,date,eventrequired) values (366e8400-fef2-11e3-8080-808080808083,C979CA35-B58D-434B-B2D6-EA0316BCC9B1,C979CA35-B58D-434B-B2D6-EA0316BCC9C1,C979CA35-B58D-434B-B2D6-EA0316BCC123,C979CA35-B58D-434B-B2D6-EA0316BCC9A2,{'Watch':1},0.6,'2014-06-25',1); 
insert into common_daily_eventsummary_per_useritem(periodid,tenantid,regionid,itemid,profileid,eventtypeaggregate,dayscore,date,eventrequired) values (366e8400-fef2-11e3-8080-808080808080,C979CA35-B58D-434B-B2D6-EA0316BCC9B1,C979CA35-B58D-434B-B2D6-EA0316BCC9C1,C979CA35-B58D-434B-B2D6-EA0316BCC120,C979CA35-B58D-434B-B2D6-EA0316BCC9A3,{'Watch':1},0.6,'2014-08-25',1); 
insert into common_daily_eventsummary_per_useritem(periodid,tenantid,regionid,itemid,profileid,eventtypeaggregate,dayscore,date,eventrequired) values (366e8400-fef2-11e3-8080-808080808081,C979CA35-B58D-434B-B2D6-EA0316BCC9B1,C979CA35-B58D-434B-B2D6-EA0316BCC9C1,C979CA35-B58D-434B-B2D6-EA0316BCC120,C979CA35-B58D-434B-B2D6-EA0316BCC9A3,{'Like':1},0.4,'2014-08-22',1); 
insert into common_daily_eventsummary_per_useritem(periodid,tenantid,regionid,itemid,profileid,eventtypeaggregate,dayscore,date,eventrequired) values (366e8400-fef2-11e3-8080-808080808082,C979CA35-B58D-434B-B2D6-EA0316BCC9B1,C979CA35-B58D-434B-B2D6-EA0316BCC9C1,C979CA35-B58D-434B-B2D6-EA0316BCC120,C979CA35-B58D-434B-B2D6-EA0316BCC9A4,{'Share':1,'Like':1},0.6,'2014-08-15',1); 
insert into common_daily_eventsummary_per_useritem(periodid,tenantid,regionid,itemid,profileid,eventtypeaggregate,dayscore,date,eventrequired) values (366e8400-fef2-11e3-8080-808080808083,C979CA35-B58D-434B-B2D6-EA0316BCC9B1,C979CA35-B58D-434B-B2D6-EA0316BCC9C1,C979CA35-B58D-434B-B2D6-EA0316BCC120,C979CA35-B58D-434B-B2D6-EA0316BCC9A4,{'Watch':1},0.6,'2014-06-25',1); 
insert into common_daily_eventsummary_per_useritem(periodid,tenantid,regionid,itemid,profileid,eventtypeaggregate,dayscore,date,eventrequired) values (366e8400-fef2-11e3-8080-808080808081,C979CA35-B58D-434B-B2D6-EA0316BCC9B1,C979CA35-B58D-434B-B2D6-EA0316BCC9C1,C979CA35-B58D-434B-B2D6-EA0316BCC120,C979CA35-B58D-434B-B2D6-EA0316BCC9A5,{'Like':1},0.4,'2014-08-22',1); 
insert into common_daily_eventsummary_per_useritem(periodid,tenantid,regionid,itemid,profileid,eventtypeaggregate,dayscore,date,eventrequired) values (366e8400-fef2-11e3-8080-808080808082,C979CA35-B58D-434B-B2D6-EA0316BCC9B3,C979CA35-B58D-434B-B2D6-EA0316BCC9C3,C979CA35-B58D-434B-B2D6-EA0316BCC120,C979CA35-B58D-434B-B2D6-EA0316BCC9A6,{'Share':1,'Like':1},0.6,'2014-08-15',1); 
create table if not exists social_friends_info( profileid uuid,friendprofileid uuid , relation text, primary key(profileid,friendprofileid));
insert into social_friends_info(profileid,friendprofileid,relation) values (C979CA35-B58D-434B-B2D6-EA0316BCC9A4,C979CA35-B58D-434B-B2D6-EA0316BCC9A1,'friend');
insert into social_friends_info(profileid,friendprofileid,relation) values (C979CA35-B58D-434B-B2D6-EA0316BCC9A4,C979CA35-B58D-434B-B2D6-EA0316BCC9A2,'friend');
insert into social_friends_info(profileid,friendprofileid,relation) values (C979CA35-B58D-434B-B2D6-EA0316BCC9A4,C979CA35-B58D-434B-B2D6-EA0316BCC9A3,'friend');
insert into social_friends_info(profileid,friendprofileid,relation) values (C979CA35-B58D-434B-B2D6-EA0316BCC9A5,C979CA35-B58D-434B-B2D6-EA0316BCC9A2,'friend');
insert into social_friends_info(profileid,friendprofileid,relation) values (C979CA35-B58D-434B-B2D6-EA0316BCC9A5,C979CA35-B58D-434B-B2D6-EA0316BCC9A3,'friend');
insert into social_friends_info(profileid,friendprofileid,relation) values (C979CA35-B58D-434B-B2D6-EA0316BCC9A5,C979CA35-B58D-434B-B2D6-EA0316BCC9A4,'friend');
insert into social_friends_info(profileid,friendprofileid,relation) values (C979CA35-B58D-434B-B2D6-EA0316BCC9A6,C979CA35-B58D-434B-B2D6-EA0316BCC9A3,'friend');
insert into social_friends_info(profileid,friendprofileid,relation) values (C979CA35-B58D-434B-B2D6-EA0316BCC9A1,C979CA35-B58D-434B-B2D6-EA0316BCC9A2,'friend');
insert into social_friends_info(profileid,friendprofileid,relation) values (C979CA35-B58D-434B-B2D6-EA0316BCC9A2,C979CA35-B58D-434B-B2D6-EA0316BCC9A4,'friend');
insert into social_friends_info(profileid,friendprofileid,relation) values (C979CA35-B58D-434B-B2D6-EA0316BCC9A2,C979CA35-B58D-434B-B2D6-EA0316BCC9A5,'friend'); 
create table if not exists eo_spark_app_prop(sparkappname text, properties map<text,text>, primary key (sparkappname));
insert into eo_spark_app_prop(sparkappname,properties) values('SocialScore',{'social_reco_date':'2014-08-29','freshness_bucket_for_last_day':'1','freshness_bucket_for_last_week':'0.75','freshness_bucket_for_last_month':'0.45','top_entries_cnt':'5','number_of_days':'1','number_of_days_for_weeks':'8','number_of_days_for_months':'38','consider_self_reco':'1','recalculation_start_date':'2014-08-01','recalculation_end_date':'2014-09-12','social_reco_date_flag':'false'});
create table if not exists social_reco(periodid timeuuid, tenantid uuid,regionid uuid,itemid uuid, profileid uuid,socialscore double,socialscorereason text, eventrequired int,date timestamp,primary key (periodid,tenantid,regionid,itemid,profileid));
create index if not exists social_reco_event_required on social_reco (eventrequired);
create index if not exists social_reco_date on social_reco (date);
